<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ptttl v0.1.0: src/ptttl_to_wav.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen_dark_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ptttl v0.1.0
   </div>
   <div id="projectbrief">C implementation of a PTTTL parser. PTTTL is a superset of NOKIA&#39;s RTTTL that adds polyphony &amp; vibrato.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ptttl_to_wav.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Converts the output of ptttl_parse() into a WAV file. No dynamic memory allocation, and no loading the entire WAV file in memory.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="ptttl__parser_8h_source.html">ptttl_parser.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ptttl__sample__generator_8h_source.html">ptttl_sample_generator.h</a>&quot;</code><br />
</div>
<p><a href="ptttl__to__wav_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa0ad3d7a458a175a3d2532f95a1a6f98"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptttl__to__wav_8h.html#aa0ad3d7a458a175a3d2532f95a1a6f98">PTTTL_WAVFILE_GENERATION_STRATEGY</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:aa0ad3d7a458a175a3d2532f95a1a6f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af7053934c43b6b549f70d48972ab7f87"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ptttl__to__wav_8h.html#af7053934c43b6b549f70d48972ab7f87">ptttl_to_wav</a> (<a class="el" href="structptttl__parser__t.html">ptttl_parser_t</a> *parser, FILE *fp, <a class="el" href="structptttl__sample__generator__config__t.html">ptttl_sample_generator_config_t</a> *config, <a class="el" href="ptttl__sample__generator_8h.html#a2cd4a11daac44dffe8622847668a238e">ptttl_waveform_type_e</a> wave_type)</td></tr>
<tr class="separator:af7053934c43b6b549f70d48972ab7f87"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Converts the output of ptttl_parse() into a WAV file. No dynamic memory allocation, and no loading the entire WAV file in memory. </p>
<p>Requires ptttl_parser.c and ptttl_sample_generator.c</p>
<p>Requires stdint.h, and fopen/fseek/fwrite from stdio.h</p>
<p>See <a href="https://github.com/eriknyquist/ptttl">https://github.com/eriknyquist/ptttl</a> for more details about PTTTL.</p>
<dl class="section author"><dt>Author</dt><dd>Erik Nyquist </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa0ad3d7a458a175a3d2532f95a1a6f98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0ad3d7a458a175a3d2532f95a1a6f98">&#9670;&nbsp;</a></span>PTTTL_WAVFILE_GENERATION_STRATEGY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PTTTL_WAVFILE_GENERATION_STRATEGY&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Defines the strategy used by <a class="el" href="ptttl__to__wav_8h.html#af7053934c43b6b549f70d48972ab7f87">ptttl_to_wav</a> to generate .wav files. The available options make various trade-offs between dynamic memory usage, performance, and composability:</p>
<ul>
<li>0 (default): <b>Seeking allowed, dynamic memory allocation not allowed.</b> This is the most portable and composable strategy. No dynamic/heap memory will be used, and no seek operations will be performed on the output file stream (allowing 'stdout' to be used as the output stream, for example). Due to the fact that we need to know how many sample points / frames there will be in order to generate the first few .wav bytes containing the header, and no seeking is allowed, this strategy comes with a performance cost, since the parser &amp; sample generator must make two full passes of the input text; once to determine the total number of sample points / frames the generated .wav file will contain, and again to obtain the sample point / frame values for writing to the output stream.</li>
<li>1: <b>Seeking not allowed, dynamic memory allocation allowed</b>. This option is more performant than 0, at the cost of dynamic memory allocation being required. Seek operations will not be performed on the output stream, but dynamic memory allocations will be performed.</li>
<li>2: <b>Seeking allowed, dynamic memory allocation not allowed.</b> This strategy is the most performant, at the cost of composability. Seek operations will be performed on the output file stream, so only one pass of the parser &amp; sample generator are required. No dynamic memory allocation will be performed. </li>
</ul>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af7053934c43b6b549f70d48972ab7f87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7053934c43b6b549f70d48972ab7f87">&#9670;&nbsp;</a></span>ptttl_to_wav()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ptttl_to_wav </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structptttl__parser__t.html">ptttl_parser_t</a> *&#160;</td>
          <td class="paramname"><em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>fp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structptttl__sample__generator__config__t.html">ptttl_sample_generator_config_t</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ptttl__sample__generator_8h.html#a2cd4a11daac44dffe8622847668a238e">ptttl_waveform_type_e</a>&#160;</td>
          <td class="paramname"><em>wave_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate samples for some parsed PTTTL data and write them directly to a .wav file. No dynamic memory allocation. Does not require holding the entire .wav file in memory at once.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parser</td><td>Pointer to initialized parser object </td></tr>
    <tr><td class="paramname">fp</td><td>File stream that has already been opened for writing. Generated contents of .wav file will be written here. </td></tr>
    <tr><td class="paramname">config</td><td>Pointer to configuration for sample generator. May be NULL. If NULL, a default configuration will be used. </td></tr>
    <tr><td class="paramname">wave_type</td><td>Waveform type to use for all channels</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, -1 if an error occurred. Call <a class="el" href="ptttl__parser_8h.html#a87bf37f225921f3e1af57df81ab4f3cc">ptttl_parser_error</a> for an error description if -1 is returned. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
